<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Election Candidate Portal</title>
  <style>
    /* Reset & base */
    :root{
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #F8B500; /* user earlier liked this color */
      --muted: #9aa6b2;
      --glass: rgba(255,255,255,0.04);
      --success: #16a34a;
      --danger: #ef4444;
      --radius: 12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071126 0%, #081424 60%);color:#e6eef6;-webkit-font-smoothing:antialiased}
    a{color:inherit}

    .container{max-width:1100px;margin:18px auto;padding:16px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;position:sticky;top:10px;background:transparent;padding:6px 0;z-index:10}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#00ADB5);display:flex;align-items:center;justify-content:center;font-weight:700;color:#072032}
    h1{font-size:18px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    /* controls */
    .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .search{background:var(--glass);padding:8px 10px;border-radius:999px;display:flex;align-items:center;gap:8px;min-width:180px;flex:1}
    .search input{border:0;background:transparent;outline:none;color:inherit;width:100%;font-size:14px}
    .btn{background:var(--accent);padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}

    main{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:12px;align-items:start}

    /* list area */
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:var(--radius);box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    .filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .chip{padding:8px 10px;background:rgba(255,255,255,0.02);border-radius:999px;font-size:13px;cursor:pointer}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;display:flex;gap:12px;align-items:center;border:1px solid rgba(255,255,255,0.03)}
    .avatar{width:64px;height:64px;border-radius:10px;flex-shrink:0;background:linear-gradient(180deg,#f5f5f5,#ddd);display:flex;align-items:center;justify-content:center;color:#072032;font-weight:700;font-size:18px}
    .meta{flex:1;min-width:0}
    .meta h3{margin:0;font-size:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta p{margin:6px 0 0 0;color:var(--muted);font-size:13px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}
    .actions{display:flex;gap:8px;align-items:center}
    .small{padding:8px 10px;border-radius:8px;border:0;cursor:pointer;font-size:13px}

    /* right sidebar */
    .sidebar .stats{display:flex;gap:10px;margin-bottom:12px}
    .stat{flex:1;background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;text-align:center}
    .stat h4{margin:0;font-size:14px}
    .stat p{margin:6px 0 0 0;color:var(--muted);font-size:13px}
    .vote-chart{height:140px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));display:flex;align-items:flex-end;gap:8px;padding:10px;border-radius:10px}
    .bar{flex:1;border-radius:6px;display:flex;align-items:flex-end;justify-content:center;padding-bottom:6px;color:#072032;font-weight:700}

    /* form */
    .form-row{display:flex;gap:8px}
    .field{display:flex;flex-direction:column;margin-bottom:10px}
    .field label{font-size:13px;color:var(--muted);margin-bottom:6px}
    .field input, .field select, .field textarea{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;outline:none}

    footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}

    /* responsive improvements for mobile */
    @media (max-width:900px){
      main{grid-template-columns:1fr;}
      .grid{grid-template-columns:1fr}
      .search{min-width:0}
      .container{padding:12px}
      .sidebar{order:2;margin-top:12px}
      section.panel{order:1}
      .vote-chart{height:120px}
    }

    @media (max-width:700px){
      .card{flex-direction:row;align-items:center;padding:12px}
      .avatar{width:56px;height:56px}
      .meta h3{font-size:14px}
      .actions{flex-direction:column;align-items:stretch;width:110px}
      .small{width:100%;padding:10px;border-radius:8px}
      .controls{gap:6px}
      header{padding-bottom:8px}
    }

    @media (max-width:420px){
      .logo{width:44px;height:44px}
      h1{font-size:16px}
      .actions{width:100%;flex-direction:row;justify-content:flex-end}
      .small{width:auto;padding:8px 10px}
      .vote-chart{display:none} /* save space on very small screens */
    }

    /* tiny visual helpers */
    .chip.active{outline:2px solid rgba(248,181,0,0.12);box-shadow:0 4px 14px rgba(0,0,0,0.35)}
    .small.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">EC</div>
        <div>
          <h1>Election Candidate Portal</h1>
          <p class="lead">Browse candidates, add new ones and simulate votes — responsive for desktop & mobile</p>
        </div>
      </div>

      <div class="controls">
        <div class="search" title="Search candidates">
          <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M21 20l-4.35-4.35" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.2" fill="none"></circle></svg>
          <input id="q" placeholder="Search by name or party... (press /)" />
        </div>
        <button class="btn" id="addBtn">+ Add</button>
        <button class="btn ghost" id="resetAllBtn" title="Reset all votes">Reset Votes</button>
      </div>
    </header>

    <main>
      <section class="panel">
        <div class="filters">
          <div class="chip active" data-party="all">All</div>
          <div class="chip" data-party="IND">Independent</div>
          <div class="chip" data-party="Party A">Party A</div>
          <div class="chip" data-party="Party B">Party B</div>
        </div>

        <div id="list" class="grid" aria-live="polite">
          <!-- candidate cards injected here -->
        </div>
        <footer>Tip: Click "Vote" to increase a candidate's vote count. Data persists locally in your browser.</footer>
      </section>

      <aside class="panel sidebar">
        <div class="stats">
          <div class="stat">
            <h4 id="totalCandidates">0</h4>
            <p>Total Candidates</p>
          </div>
          <div class="stat">
            <h4 id="totalVotes">0</h4>
            <p>Total Votes</p>
          </div>
        </div>

        <div class="vote-chart" id="chart" aria-hidden="false">
          <!-- bars injected -->
        </div>

        <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0;border-radius:2px" />

        <div>
          <h3 style="margin:0 0 8px 0">Add / Edit Candidate</h3>
          <form id="form">
            <div class="field">
              <label>Name</label>
              <input id="name" required />
            </div>
            <div class="field">
              <label>Party</label>
              <input id="party" placeholder="e.g. Party A or Independent" />
            </div>
            <div class="form-row">
              <div class="field" style="flex:1">
                <label>Age</label>
                <input id="age" type="number" min="18" />
              </div>
              <div class="field" style="width:120px">
                <label style="visibility:hidden">btn</label>
                <button type="button" class="btn ghost" id="clear">Clear</button>
              </div>
            </div>
            <div class="field">
              <label>Short Bio</label>
              <textarea id="bio" rows="3"></textarea>
            </div>
            <div style="display:flex;gap:8px">
              <button class="btn" type="submit">Save</button>
            </div>
          </form>
        </div>
      </aside>
    </main>
  </div>

  <script>
    // Simple single-file app: stores data in localStorage. Suitable for prototyping only.
    const STORAGE_KEY = 'election_portal_v1';
    const sample = [
      {id:genId(),name:'Asha Patel',party:'Party A',age:42,bio:'Community leader focused on education.',votes:124},
      {id:genId(),name:'Vikram Rao',party:'Party B',age:50,bio:'Business background, pro-infrastructure.',votes:98},
      {id:genId(),name:'Meera Khan',party:'IND',age:36,bio:'Youth activist & volunteer.',votes:212}
    ];

    let state = load() || sample;
    let editingId = null;

    // elements
    const listEl = document.getElementById('list');
    const totalCandidates = document.getElementById('totalCandidates');
    const totalVotes = document.getElementById('totalVotes');
    const chart = document.getElementById('chart');
    const q = document.getElementById('q');

    // form
    const form = document.getElementById('form');
    const nameIn = document.getElementById('name');
    const partyIn = document.getElementById('party');
    const ageIn = document.getElementById('age');
    const bioIn = document.getElementById('bio');
    const addBtn = document.getElementById('addBtn');
    const clearBtn = document.getElementById('clear');
    const resetAllBtn = document.getElementById('resetAllBtn');

    // init
    render();
    attachListeners();

    function attachListeners(){
      form.addEventListener('submit', onSave);
      clearBtn.addEventListener('click', onClear);
      addBtn.addEventListener('click', ()=>{scrollToForm();});
      q.addEventListener('input', render);
      resetAllBtn.addEventListener('click', resetAllVotes);

      document.querySelectorAll('.chip').forEach(c=>c.addEventListener('click', (e)=>{filterByParty(e.currentTarget.dataset.party);}));
    }

    function onSave(e){
      e.preventDefault();
      const name = nameIn.value.trim();
      if(!name){alert('Name required');return}
      const party = partyIn.value.trim() || 'Independent';
      const age = parseInt(ageIn.value) || null;
      const bio = bioIn.value.trim();

      if(editingId){
        const idx = state.findIndex(s=>s.id===editingId);
        if(idx>-1){
          state[idx] = {...state[idx],name,party,age,bio};
        }
        editingId = null;
      }else{
        state.push({id:genId(),name,party,age,bio,votes:0});
      }
      save(); render(); onClear();
    }

    function onClear(){
      nameIn.value=''; partyIn.value=''; ageIn.value=''; bioIn.value=''; editingId=null; form.querySelector('button[type=submit]').textContent='Save'
    }

    function scrollToForm(){
      // jump to sidebar form on mobile/desktop
      document.querySelector('.sidebar').scrollIntoView({behavior:'smooth'});
    }

    function render(){
      const filter = (document.querySelector('.chip.active')||{}).dataset?.party || 'all';
      const query = q.value.trim().toLowerCase();
      const filtered = state.filter(c=>{
        if(filter && filter!=='all' && c.party !== filter) return false;
        if(query){
          return c.name.toLowerCase().includes(query) || (c.party||'').toLowerCase().includes(query) || (c.bio||'').toLowerCase().includes(query)
        }
        return true;
      });

      listEl.innerHTML='';
      if(filtered.length===0){
        listEl.innerHTML='<div style="color:var(--muted);padding:18px">No candidates found. Add one using the form.</div>';
      }

      filtered.forEach(c=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `
          <div class="avatar">${initials(c.name)}</div>
          <div class="meta">
            <h3>${escapeHtml(c.name)} <span style="font-size:12px;color:var(--muted);font-weight:600">• ${escapeHtml(c.party||'Independent')}</span></h3>
            <p>${escapeHtml(c.bio||'—')}</p>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
            <div style="font-weight:700">${c.votes}</div>
            <div class="actions">
              <button class="small ghost" data-id="${c.id}" data-action="edit">Edit</button>
              <button class="small ghost" data-id="${c.id}" data-action="reset">Reset</button>
              <button class="small ghost" data-id="${c.id}" data-action="delete">Delete</button>
              <button class="small" data-id="${c.id}" data-action="vote">Vote</button>
            </div>
          </div>
        `;
        listEl.appendChild(el);
      });

      // attach card listeners
      listEl.querySelectorAll('button').forEach(b=>b.addEventListener('click', onCardAction));

      // stats
      totalCandidates.textContent = state.length;
      totalVotes.textContent = state.reduce((s,i)=>s+i.votes,0);

      renderChart();
    }

    function onCardAction(e){
      const id = e.currentTarget.dataset.id;
      const act = e.currentTarget.dataset.action;
      if(act==='vote'){
        voteFor(id);
      }else if(act==='edit'){
        editCandidate(id);
      }else if(act==='delete'){
        deleteCandidate(id);
      }else if(act==='reset'){
        resetVotes(id);
      }
    }

    function voteFor(id){
      const idx = state.findIndex(s=>s.id===id); if(idx===-1) return;
      state[idx].votes += 1; save(); render();
    }

    function resetVotes(id){
      const idx = state.findIndex(s=>s.id===id); if(idx===-1) return;
      if(confirm('Reset votes for this candidate to 0?')){ state[idx].votes = 0; save(); render(); }
    }

    function resetAllVotes(){
      if(state.length===0) return;
      if(!confirm('Reset votes for ALL candidates? This cannot be undone.')) return;
      state = state.map(s=>({ ...s, votes: 0 })); save(); render();
    }

    function deleteCandidate(id){
      if(!confirm('Delete this candidate? This will remove all their data.')) return;
      state = state.filter(c => c.id !== id);
      save(); render();
    }

    function editCandidate(id){
      const c = state.find(s=>s.id===id); if(!c) return;
      nameIn.value=c.name; partyIn.value=c.party; ageIn.value=c.age||''; bioIn.value=c.bio||''; editingId=c.id; form.querySelector('button[type=submit]').textContent='Update'; scrollToForm();
    }

    function renderChart(){
      chart.innerHTML='';
      if(state.length===0) return;
      const max = Math.max(...state.map(s=>s.votes),1);
      state.slice(0,6).forEach(s=>{
        const h = Math.round((s.votes/max)*100);
        const div = document.createElement('div'); div.className='bar'; div.style.height = (10 + h) + '%'; div.style.background = `linear-gradient(180deg, var(--accent), #00ADB5)`; div.textContent = s.votes;
        div.title = `${s.name} — ${s.votes} votes`;
        chart.appendChild(div);
      });
    }

    function filterByParty(party){
      document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
      const el = Array.from(document.querySelectorAll('.chip')).find(x=>x.dataset.party===party);
      if(el) el.classList.add('active');
      render();
    }

    function save(){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }
    function load(){
      try{const s = localStorage.getItem(STORAGE_KEY); return s?JSON.parse(s):null}catch(e){return null}
    }

    // util
    function genId(){return 'c_'+Math.random().toString(36).slice(2,9)}
    function initials(name){return name.split(' ').map(n=>n[0]).slice(0,2).join('').toUpperCase()}
    function escapeHtml(s){return (s+'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')}

    // small UX: clear filter when clicking outside chips
    document.addEventListener('click', (e)=>{
      if(e.target.closest('.chip')) return;
      // do nothing for now
    });

    // keyboard shortcut: / to focus search
    document.addEventListener('keydown', e=>{ if(e.key==='/' && document.activeElement.tagName!=='INPUT' && document.activeElement.tagName!=='TEXTAREA'){ e.preventDefault(); q.focus(); } });

  </script>
</body>
</html>
